<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with mimsy • mimsy</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with mimsy">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mimsy</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/mimsy.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/michelleckelly/mimsy">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Get started with mimsy</h1>
            
            <h4 class="date">2018-12-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/michelleckelly/mimsy/blob/master/vignettes/mimsy.Rmd"><code>vignettes/mimsy.Rmd</code></a></small>
      <div class="hidden name"><code>mimsy.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>1. Introduction</h2>
<p>mimsy is a package designed to calculate dissolved gas concentrations of oxygen, nitrogen, and argon from Membrane Inlet Mass Spectrometer (MIMS) signal data. For more information on the gas solubility equations used in this package, please see the References section. No R expertise is required to use mimsy, and this guide is designed for novice R users.</p>
<p>If you find bugs in this software, or you would like to suggest new features, please let us know on the <a href="https://github.com/michelleckelly/mimsy/issues">mimsy GitHub page</a>.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>2. Installation</h2>
<p>mimsy is not yet released on CRAN, the official repository for R packages. To download mimsy from GitHub, use the devtools package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install the devtools package</span>
<span class="kw">install.packages</span>(<span class="st">"devtools"</span>)

<span class="co"># Load devtools</span>
<span class="kw">library</span>(devtools)

<span class="co"># Download mimsy from github using devtools</span>
<span class="kw">install_github</span>(<span class="st">"michelleckelly/mimsy"</span>, <span class="dt">dependencies =</span> <span class="st">"Depends"</span>)</code></pre></div>
<p>Afterwards, you can load mimsy like any other package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load mimsy</span>
<span class="kw">library</span>(mimsy)</code></pre></div>
</div>
<div id="running-mimsy" class="section level2">
<h2 class="hasAnchor">
<a href="#running-mimsy" class="anchor"></a>3. Running mimsy</h2>
<p>The general structure for running mimsy is:</p>
<ol style="list-style-type: decimal">
<li>Format your CSV file</li>
<li>Load CSV file into R using <code>read.csv()</code>
</li>
<li>Run the <code><a href="../reference/mimsy.html">mimsy()</a></code> function</li>
<li>Explore the results</li>
<li>Save the results to an Excel file using <code><a href="../reference/mimsy.save.html">mimsy.save()</a></code> or an RData file using <code>save()</code>
</li>
</ol>
<div id="format-your-csv-file" class="section level3">
<h3 class="hasAnchor">
<a href="#format-your-csv-file" class="anchor"></a>3.1. Format your CSV file</h3>
<p>You’ll need to add some special columns to your data file before loading it into R. The easiest way to do this is to use a spreadsheet editor like Excel. We recommend saving a seperate copy of your raw data file for mimsy (add “_mimsy" to the file name) to prevent any accidents.</p>
<p><strong>CSV file format:</strong></p>
<ul>
<li>You can save as CSV within Excel from the <em>File &gt; Save as</em> menu, choosing the <em>CSV (Comma delimited) (.csv)</em> file extension option.</li>
</ul>
<p><strong>Columns:</strong></p>
<ul>
<li>Type
<ul>
<li>If the row contains data for a standard, enter “Standard”. If the row contains data for a sample, enter “Sample”.</li>
<li>The name of this column must be “Type” (check for correct capitalization)<br>
</li>
</ul>
</li>
<li>Group
<ul>
<li>Each block of standards and the samples run directly afterwards belong to a group. You’ll enter “1” for the first block of standards and the first block of samples. You’ll enter “2” for the second block of standards and the second block of samples, etc.<br>
</li>
<li>The name of this column must be “Group” (check for correct capitalization)<br>
</li>
</ul>
</li>
<li>CollectionTemp
<ul>
<li>The temperature of samples or standards at the time of field collection, in degrees C</li>
<li>The name of this column must be “CollectionTemp” (check for correct capitalization)<br>
</li>
</ul>
</li>
<li>RunDate
<ul>
<li>The date (M/D/YYYY) that samples were run on the MIMS.<br>
</li>
<li>The name of this column must be “RunDate” (check for correct capitalization)</li>
</ul>
</li>
<li>Label or other sample identifier columns
<ul>
<li>mimsy will preserve all labelling columns in the final output, so you should add whatever labels or notes columns you like</li>
</ul>
</li>
<li>Index, Time, 28, 32, 40, 99, N2/Ar, O2/Ar columns
<ul>
<li>This is the default output from the MIMS</li>
</ul>
</li>
</ul>
<div class="figure">
<img src="excel.png" alt="Figure 1. An example of a correctly formatted raw data file."><p class="caption">Figure 1. An example of a correctly formatted raw data file.</p>
</div>
</div>
<div id="load-your-csv-file-into-r-using-read-csv" class="section level3">
<h3 class="hasAnchor">
<a href="#load-your-csv-file-into-r-using-read-csv" class="anchor"></a>3.2. Load your CSV file into R using <code>read.csv()</code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load data into R</span>
data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">"data.csv"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

<span class="co"># Check out the structure</span>
<span class="kw">str</span>(data, <span class="dt">vec.len =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>#&gt; 'data.frame':    42 obs. of  14 variables:
#&gt;  $ Type          : chr  "Standard" "Standard" ...
#&gt;  $ Group         : int  1 1 1 1 1 ...
#&gt;  $ CollectionTemp: num  24.9 24.9 24.9 26.3 26.3 ...
#&gt;  $ RunDate       : chr  "2/1/2018" "2/1/2018" ...
#&gt;  $ Label         : chr  NA NA ...
#&gt;  $ Index         : int  3029 3079 3128 3212 3261 ...
#&gt;  $ Time          : chr  "10:32:53 AM" "10:34:07 AM" ...
#&gt;  $ X28           : num  1.20e-08 1.20e-08 1.20e-08 1.19e-08 1.18e-08 ...
#&gt;  $ X32           : num  5.75e-09 5.75e-09 5.75e-09 5.66e-09 5.66e-09 ...
#&gt;  $ X40           : num  2.98e-10 2.98e-10 2.98e-10 2.93e-10 2.93e-10 ...
#&gt;  $ X99           : num  5.51e-07 5.49e-07 5.49e-07 5.41e-07 5.41e-07 ...
#&gt;  $ N2.Ar         : num  40.3 40.3 ...
#&gt;  $ O2.Ar         : num  19.3 19.3 ...
#&gt;  $ Notes         : chr  "Barometric pressure =  977.2 hPa" "" ...</code></pre>
</div>
<div id="run-the-mimsy-function" class="section level3">
<h3 class="hasAnchor">
<a href="#run-the-mimsy-function" class="anchor"></a>3.3. Run the <code><a href="../reference/mimsy.html">mimsy()</a></code> function</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Run the function</span>
results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mimsy.html">mimsy</a></span>(data, <span class="dt">baromet.press =</span> <span class="fl">977.2</span>, <span class="dt">units =</span> <span class="st">"hPa"</span>)</code></pre></div>
<p>You must specify the barometric pressure (<code>baromet.press</code>) and it’s units in the function argument. Units must be one of <code>"atm"</code>, <code>"hPa"</code>, <code>"psi"</code>, <code>"bar"</code>, or <code>"Torr"</code>. All other inputs, such as background corrections or standard salinity, are optional. Check out <code><a href="../reference/mimsy.html">?mimsy</a></code> for more information.</p>
</div>
<div id="explore-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#explore-the-results" class="anchor"></a>3.4. Explore the results</h3>
</div>
<div id="save-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#save-the-results" class="anchor"></a>3.5. Save the results</h3>
</div>
<div id="then-inspect-the-output" class="section level3">
<h3 class="hasAnchor">
<a href="#then-inspect-the-output" class="anchor"></a>Then, inspect the output:</h3>
<p><code><a href="../reference/mimsy.html">mimsy()</a></code> returns a list containing five data frames:</p>
<ol style="list-style-type: decimal">
<li><code>$results</code></li>
<li><code>$solubility.Concentrations</code></li>
<li><code>$calibration.Factors</code></li>
<li><code>$calibration.DriftCorrection</code></li>
<li><code>$results.full</code></li>
</ol>
<p><strong><code>$results</code></strong> displays a summarized output, containing just identification columns (such as the user’s input of <code>Label</code> or <code>Project</code>) and calculated concentration values (ex. <code>N2_uMol</code> and <code>N2_mg</code> for the concentration of dissolved dinitrogen gas, in microMoles and milligrams, respectively). <code>$results</code> only contains sample results, but see <code>$results.full</code> below for results from both samples and standards.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># results from the sample data</span>
data<span class="op">$</span>results</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># output kable of results</span>
<span class="kw">kable</span>(data<span class="op">$</span>results, <span class="dt">digits =</span> <span class="dv">20</span>, 
      <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">"Label"</span>, <span class="st">"CollectionTemp"</span>, <span class="st">"Notes"</span>, <span class="st">"Type"</span>,
                    <span class="st">"Group"</span>, <span class="st">"N2_uMol"</span>, <span class="st">"O2_uMol"</span>, <span class="st">"Ar_uMol"</span>, 
                    <span class="st">"N2_mg"</span>, <span class="st">"O2_mg"</span>, <span class="st">"Ar_mg"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">kable_styling</span>(<span class="dt">bootstrap_options =</span> <span class="st">"condensed"</span>, <span class="dt">full_width =</span> F) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">scroll_box</span>(<span class="dt">height =</span> <span class="st">"300px"</span>)</code></pre></div>
<p><strong><code>$solubility.Concentrations</code></strong> displays the calculated concentrations [<span class="math inline">\(\small\mu Mole\:kg^{-1}\)</span>] of oxygen, nitrogen, and argon gas in water at specific temperature, pressure, and salinity. Row names correspond to <code>std.temps</code>. See Garcia and Gordon (1992, Eqn. 8) for further information on oxygen saturation concentration calculations and the equations used herein. See Hamme and Emerson (2004, Table 4, and Eq. 1, 2) for the expansion of Garcia and Gordon’s methods for use with calculating nitrogen and argon saturation concentrations.</p>
<p><strong><code>$calibration.Factors</code></strong> are computed by taking the solubility concentrations at standard temperature divided by the average MIMS signal reading of each <code>Group</code> at said temperature. These values will then be used internally to calculate the calibration curve, and are made available to the user for transparency.</p>
<p><strong><code>$calibration.DriftCorrection</code></strong> is a data frame containing the slopes and intercepts of the calibration curve for each dissolved gas (ex. <code>calslope_28</code> for the slope of the dinitrogen calibration curve), and the drift corrected slope and intercept values (ex. <code>DRIFT.calslope_28</code>) which take into account the machine drift due to time that occurs in-between standard readings. These drift values are computed by taking the slope between successive calibration (slope or intercept) values. These values are used internally, and are made available to the user for transparency.</p>
<p><strong><code>$results.full</code></strong> is a data frame that contains the entire output from <code><a href="../reference/mimsy.html">mimsy()</a></code>, including results from both standards and samples, the initial MIMS signal data and signal ratios, the calibration curve correction factors for each reading (ex. <code>INTERPOLATED.calfactor_28</code>), and the final concentration values.</p>
</div>
</div>
<div id="save-the-output-data" class="section level2">
<h2 class="hasAnchor">
<a href="#save-the-output-data" class="anchor"></a>Save the output data</h2>
<p>Save the entire output to a compact RData file for further R analysis, or use <code><a href="../reference/mimsy.save.html">mimsy.save()</a></code> to export to a multi-tabbed Excel file for analysis outside R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Save output to an RData file</span>
<span class="kw">save</span>(<span class="dt">x =</span> data, <span class="dt">file =</span> <span class="st">"results.RData"</span>)

<span class="co"># Save output to an Excel workbook</span>
<span class="kw"><a href="../reference/mimsy.save.html">mimsy.save</a></span>(<span class="dt">x =</span> data, <span class="dt">file =</span> <span class="st">"results.xlsx"</span>)</code></pre></div>
<p><strong><code>x</code></strong> the processed data, returned by the <code><a href="../reference/mimsy.html">mimsy()</a></code> function</p>
<p><strong><code>file</code></strong> desired file name with appropriate extension. Saves to user’s working directory, unless an alternative path is specified.</p>
<p>See the help file at <code>?save</code> or <code><a href="../reference/mimsy.save.html">?mimsy.save</a></code> for more information.</p>
<p>Alternatively, you can save individual pieces of the output (such as <code>data$results</code>) using the <code>write.csv()</code> function. However, we recommend saving the full output for the sake of both reproducability and your future self.</p>
</div>
<div id="putting-it-all-together" class="section level2">
<h2 class="hasAnchor">
<a href="#putting-it-all-together" class="anchor"></a>4. Putting it all together</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install the devtools package</span>
<span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
<span class="co"># Load devtools</span>
<span class="kw">library</span>(devtools)
<span class="co"># Download mimsy from Github using devtools</span>
<span class="kw">install_github</span>(<span class="st">"michelleckelly/mimsy"</span>, <span class="dt">dependencies =</span> <span class="st">"Depends"</span>)

<span class="co"># Load mimsy</span>
<span class="kw">library</span>(mimsy)

<span class="co"># Load data into R</span>
data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">"data.csv"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)

<span class="co"># Run the mimsy function</span>
results &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mimsy.html">mimsy</a></span>(data, <span class="dt">baromet.press =</span> <span class="fl">977.2</span>, <span class="dt">units =</span> <span class="st">"hPa"</span>)

<span class="co"># Save the results</span>
<span class="kw"><a href="../reference/mimsy.save.html">mimsy.save</a></span>(<span class="dt">x =</span> data, <span class="dt">file =</span> <span class="st">"results.xlsx"</span>) <span class="co"># To Excel file</span>
<span class="kw">save</span>(<span class="dt">x =</span> data, <span class="dt">file =</span> <span class="st">"results.RData"</span>) <span class="co"># To RData file</span>

<span class="co"># Done!</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">1. Introduction</a></li>
      <li><a href="#installation">2. Installation</a></li>
      <li><a href="#running-mimsy">3. Running mimsy</a></li>
      <li><a href="#save-the-output-data">Save the output data</a></li>
      <li><a href="#putting-it-all-together">4. Putting it all together</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michelle C. Kelly.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
